"use strict";!function(e){var r=e.module("appModule",["ngRoute"],["$httpProvider",function(r){r.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var n=function t(e){var r,n,o,i,a,l,d,c="";for(r in e)if(n=e[r],n instanceof Array)for(d=0;d<n.length;++d)a=n[d],o=r+"["+d+"]",l={},l[o]=a,c+=t(l)+"&";else if(n instanceof Object)for(i in n)a=n[i],o=r+"["+i+"]",l={},l[o]=a,c+=t(l)+"&";else void 0!==n&&null!==n&&(c+=encodeURIComponent(r)+"="+encodeURIComponent(n)+"&");return c.length?c.substr(0,c.length-1):c};r.defaults.transformRequest=[function(r){return e.isObject(r)&&"[object File]"!==String(r)?n(r):r}]}]);r.factory("ipcService",["$http","$q",function(e,r){return{positions:function(r){return r=isNaN(parseInt(r))?1:parseInt(r),e.post("/api/admin/query",{field:["positionId","haveProduct"],from:"positions",pagination:40,page:r})},positionPages:function(){return e.post("/api/admin/maxPages",{pagination:40})},unnoticedOrders:function(r){return e.post("/api/admin/query",{where:[{key:"haveNoticed",value:0}],field:["orderId","usrPhoneNumber"],from:"orders",pagination:20,page:r})},order:function(r){return e.post("/api/admin/query",{where:[{key:"orderId",value:r}],field:["orderId","usrPhoneNumber","orderInfo","usrId","positionId","importTime","exportTime"],from:"orders"})},usr:function(r){return e.post("/api/admin/query",{where:[{key:"name",value:r}],field:["id","usrPhoneNumber","psw","lastIp","name","lastLogin"],from:"usr"})},adminName:function(){return e.post("/api/admin/getRootName",{})}}}]),r.config(["$routeProvider",function(e){e.when("/",{controller:"IndexController",templateUrl:"/tpl/admin/index.html"}).when("/index",{controller:"IndexController",templateUrl:"/tpl/admin/index.html"}).when("/containerStatus",{controller:"containerStatusController",templateUrl:"/tpl/admin/containerStatus.html"}).when("/unnoticed",{controller:"unnoticedController",templateUrl:"/tpl/admin/unnoticed.html"}).when("/backOrder",{controller:"backOrderController",templateUrl:"/tpl/admin/backOrder.html"}).when("/usrStatus",{controller:"usrStatusController",templateUrl:"/tpl/admin/usrStatus.html"}).when("/usrOrder",{controller:"usrOrderController",templateUrl:"/tpl/admin/usrOrder.html"}).when("/orderConf",{controller:"orderConfController",templateUrl:"/tpl/admin/orderConf.html"})}]);r.controller("containerStatusController",["$scope","ipcService",function(e,r){e.nowPage="1";var n=function(){r.positions(e.nowPage).then(function(r){e.positions=JSON.parse(r.data).list}),r.positionPages(e.nowPage).then(function(e){})};e.$watch("nowPage",n)}]),r.controller("msgController",["$scope","ipcService",function(e,r){e.username="root",r.adminName().then(function(r){e.username=JSON.parse(r.data)})}]),r.controller("unnoticedController",["$scope","ipcService",function(e,r){e.datahave=!1,e.nowPage="1";var n=function(){r.unnoticedOrders(e.nowPage).then(function(r){e.unnoticedOrders=JSON.parse(r.data).list,e.datahave=parseInt(e.unnoticedOrders.length)>0})};e.$watch("nowPage",n)}]),r.controller("backOrderController",["$scope",function(e){}]),r.controller("usrStatusController",["$scope","ipcService",function(e,r){e.datahave=!1;var n=function(){r.usr(e.usrid).then(function(r){e.usr=JSON.parse(r.data).list,e.datahave=parseInt(r.length)>0})};e.$watch("usrid",n)}]),r.controller("usrOrderController",["$scope","ipcService","$http",function(e,r,n){e.orderid="",e.datahave=!1;var t=function(){r.order(e.orderid).then(function(r){e.order=JSON.parse(r.data).list})};e.$watch("orderid",function(e){var r=/\b\d{12}\b/g;null!==e.toString().match(r)&&t()})}]),r.controller("orderConfController",["$scope","ipcService","$http",function(e,r,n){e.datahave=!0,e.order={orderid:115,usrphonenumber:11234511351,orderinfo:"this is some infomation",usrid:1234521852,positionid:1123445,importtime:"2016-17-6 13:14:55",exporttime:"2016-17-6 15:14:55"},load(),e.edit=function(e){r.order().then(function(e){}),load()}}]),r.controller("IndexController",["$scope",function(e){}])}(angular);