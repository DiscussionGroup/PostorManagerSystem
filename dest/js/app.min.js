"use strict";!function(){var e=angular.module("appModule",["ngRoute"],function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var r=function n(e){var r,o,t,i,s,c,l,u="";for(r in e)if(o=e[r],o instanceof Array)for(l=0;l<o.length;++l)s=o[l],t=r+"["+l+"]",c={},c[t]=s,u+=n(c)+"&";else if(o instanceof Object)for(i in o)s=o[i],t=r+"["+i+"]",c={},c[t]=s,u+=n(c)+"&";else void 0!==o&&null!==o&&(u+=encodeURIComponent(r)+"="+encodeURIComponent(o)+"&");return u.length?u.substr(0,u.length-1):u};e.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?r(e):e}]});e.factory("ipcService",["$http","$q",function(e,r){return{positions:function(n){n=isNaN(parseInt(n))?1:parseInt(n);var o=r.defer();return e.post("/admin/edit/query",{field:["positionId","haveProduct"],from:"positions",pagination:40,page:n}).success(function(e){o.resolve(JSON.parse(e).list)}).error(function(e){o.reject(e)}),o.promise},positionPages:function(){var n=r.defer();return e.post("/admin/edit/maxPages",{pagination:40}).success(function(e){n.resolve(JSON.parse(e))}).error(function(e){n.reject(e)}),n.promise},unnoticedOrders:function(n){var o=r.defer();return e.post("/admin/edit/query",{where:[{key:"haveNoticed",value:0}],field:["orderId","usrPhoneNumber"],from:"orders",pagination:20,page:n}).success(function(e){o.resolve(JSON.parse(e).list)}).error(function(e){o.reject(e)}),o.promise},order:function(n){var o=r.defer();return e.post("/admin/edit/query",{where:[{key:"orderId",value:n}],field:["orderId","usrPhoneNumber","orderInfo","usrId","positionId","importTime","exportTime"],from:"orders"}).success(function(e){var r=JSON.parse(e);1==r.status?o.resolve(r.list):2==r.status&&o.resolve({response:r.response,failed:!0})}).error(function(e){o.reject(e)}),o.promise},usr:function(n){var o=r.defer();return e.post("/admin/edit",{where:[{key:"name",value:n}],field:["usrId","usrPhoneNumber","psw","lastIp","name","lastLogin"],from:"usr"}).success(function(e){o.resolve(JSON.parse(e))}).error(function(e){o.reject(e)}),o.promise}}}]),e.config(["$routeProvider",function(e){e.when("/",{controller:"IndexController",templateUrl:"/admin/public/index"}).when("/index",{controller:"IndexController",templateUrl:"/admin/public/index"}).when("/containerStatus",{controller:"containerStatusController",templateUrl:"/admin/public/containerStatus"}).when("/unnoticed",{controller:"unnoticedController",templateUrl:"/admin/public/unnoticed"}).when("/backOrder",{controller:"backOrderController",templateUrl:"/admin/public/backOrder"}).when("/usrStatus",{controller:"usrStatusController",templateUrl:"/admin/public/usrStatus"}).when("/usrOrder",{controller:"usrOrderController",templateUrl:"/admin/public/usrOrder"}).when("/orderConf",{controller:"orderConfController",templateUrl:"/admin/public/orderConf"})}]);e.controller("containerStatusController",["$scope","ipcService",function(e,r){e.nowPage="1",r.positions(e.nowPage).then(function(r){e.positions=r}),r.positionPages(e.nowPage).then(function(r){e.pages=r}),e.$watch("nowPage",function(n){r.positions(e.nowPage).then(function(r){e.positions=r})})}]),e.controller("unnoticedController",["$scope","ipcService",function(e,r){e.nowPage="1",r.unnoticedOrders(e.nowPage).then(function(r){e.unnoticedOrders=r}),e.$watch("nowPage",function(n){r.unnoticedOrders(e.nowPage).then(function(r){e.unnoticedOrders=r})})}]),e.controller("backOrderController",["$scope",function(e){}]),e.controller("usrStatusController",["$scope","ipcService",function(e,r){e.datahave=!1,r.usr(name).then(function(r){e.usr=r.list,e.datahave=parseInt(r.lenght)>0})}]),e.controller("usrOrderController",function(e,r,n){e.orderid="",r.order(e.nowPage).then(function(r){e.order=r}),e.$watch("orderid",function(n){var o=/\b\d{12}\b/g;null!==n.toString().match(o)&&r.order(e.orderid).then(function(r){e.order=r})})}),e.controller("orderConfController",["$scope",function(e){}]),e.controller("IndexController",["$scope",function(e){}])}(angular);