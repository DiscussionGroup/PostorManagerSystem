"use strict";function sidebarRefresh(e){""!==e&&$.post("/api/get/getOrderNumber",e,function(e){var t=JSON.parse(e);$("#checkedCount").text(t.checkedCount),$("#uncheckCount").text(t.uncheckedCount);var n=t.checkedCount+t.uncheckedCount;$("#allCount").text(n)})}function turnUnreceived(e){nowpositon="Unreceived",$("#main").load("/tpl/UncheckedPage.html",function(){loadUnchecked(e)})}function changeToConfig(){nowpositon="Config",$("#main").load("/tpl/UsrConfig.html")}function turnReceived(e){nowpositon="Received",$("#main").load("/tpl/CheckedPage.html",function(){loadChecked(e)})}function turnBin(){nowpositon="Bin",$("#main").load("/tpl/UsrBin.html",loadBin)}function turnAll(e){nowpositon="All",$("#main").load("/tpl/AllTable.html",function(){loadAll(e)})}function loginOut(){var e;""!==e?$.post("/api/login/loginOut",e,function(e){var t=JSON.parse(e);1==t.status?window.location="/login.html?respond=1":alert("没有成功登出")}):window.location="/login.html?respond=1"}function loadChecked(e){e||(e=1),$.post("/api/get/getChecked",{page:e},function(e){e=JSON.parse(e),$("#OrderTable").html(""),$.each(e.orders,function(e,t){$("#OrderTable").append("<tr><td><label class='input-control checkbox small-check no-margin'><input type='checkbox' id='checkBox_"+e+"'><span class='check'></span></label></td><td>"+t.orderid+"</td><td>"+t.exporttime+"</td><td>"+t.orderinfo+"</td><td>"+t.postorid+"</td></tr>")}),iniPages(e.maxPage,e.page),loadConvertButton(e)})}function loadUnchecked(e){e||(e=1),$.post("/api/get/getUnchecked",{page:e},function(e){e=JSON.parse(e),$("#OrderTable").html(""),$.each(e.orders,function(e,t){var n;n="1"==t.delay?new Date(new Date(t.importtime).valueOf()+864e5):new Date(t.importtime),$("#OrderTable").append("<tr><td><label class='input-control checkbox small-check no-margin'><input type='checkbox' class='uncheck' id='checkBox_"+e+"' data-id='"+t.orderid+"'><span class='check'></span></label></td><td>"+t.orderid+"</td><td>"+t.importtime+"</td><td>"+n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+n.toTimeString()+"</td><td>"+t.positionid+"</td><td>"+t.orderinfo+"</td><td>"+t.postorid+"</td></tr>")}),iniPages(e.maxPage,e.page),loadConvertButton(e)})}function loadAll(e){e||(e=1),$.post("/api/get/getAllTables",{page:e},function(e){e=JSON.parse(e),$("#OrderTable").html(""),$.each(e.orders,function(e,t){$("#OrderTable").append("<tr><td><label class='input-control checkbox small-check no-margin'><input type='checkbox' class='uncheck' id='checkBox_"+e+"' data-id='"+t.orderid+"'><span class='check'></span></label></td><td>"+t.orderid+"</td><td>"+t.importtime+"</td><td>"+t.exporttime+"</td><td>"+t.positionid+"</td><td>"+t.orderinfo+"</td><td>"+t.postorid+"</td></tr>")}),iniPages(e.maxPage,e.page),loadConvertButton(e)})}function loadConvertButton(e){var t=e.page-0,n=e.maxPage-0;$("#page").html(""),$("#page").append(t+"/"+n),t>=2&&($("#previousPage").attr("onclick",""),$("#previousPage").attr("onclick","loadUnchecked("+(t-1)+")")),n>1&&($("#nextPage").attr("onclick",""),$("#nextPage").attr("onclick","loadUnchecked("+(t+1)+")"))}function respondDialog(e,t,n){var a=$(e).data("dialog");$(e).children().children()[0].innerHTML=n,a.open()}function showDialog(e){var t=$(e).data("dialog");t.open()}function closeDialog(e){var t=$(e).data("dialog");t.close()}function pushMessage(e){var t="通知|你已经选择了全部订单";$.Notify({caption:t.split("|")[0],content:t.split("|")[1],type:"success"})}function selectCheckBox(e){var t="通知|你已经选择了全部订单|你已经取消了全部订单";$.Notify({caption:t.split("|")[0],content:t.split("|")["true"==e?1:2],type:"true"==e?"info":"success"});var n=document.getElementsByClassName("uncheck");$.each(n,function(t,n){n.checked="true"==e})}function delayOrders(){var e="通知|你选择的订单已被延期处理";$.Notify({caption:e.split("|")[0],content:e.split("|")[1],type:"warning"});var t=[],n=document.getElementsByClassName("uncheck");return $.each(n,function(e,n){n.checked===!0&&t.push($(n).data("id"))}),0===t.length?!1:void $.ajax({type:"post",url:"/api/get/delay",data:{orderlist:t},dataType:"json",success:function(e){turnUnreceived()}})}function msg(e){$.Notify({caption:e.split("|")[0],content:e.split("|")[1],type:"success"})}function iniPages(e,t){var n=$("#pages"),a={cont:$("#pagecont"),pages:e,skip:!0,skin:"#01a0e1",curr:t||1,groups:5,jump:function(e,t){if(!t){var a=e.curr;switch(nowpositon){case"Unreceived":loadUnchecked(a);break;case"All":loadAll(a);break;case"Received":loadChecked(a)}}n.html("当前：第"+e.curr+"页，总计："+e.pages+"页")}};laypage(a)}var nowpositon="default";$(function(){$(".sidebar").on("click","li",function(){$(this).hasClass("active")||($(".sidebar li").removeClass("active"),$(this).addClass("active"))})}),$(document).ready(function(){$("#tishi").load("/api/get/usrconfig",function(){$("#carousel").carousel()});var e;sidebarRefresh(e),$.ajax({type:"POST",url:"/api/get/getusrname",data:{},success:function(e){e=JSON.parse(e);var t=$("#username");t[0].innerHTML="",t.append('<span class="mif-cog"></span><span>'+e.name+"</span>")},dataType:"json"}),$(window).on("resize",function(){$(this).width()<=800?$(".sidebar").addClass("compact"):$(".sidebar").removeClass("compact")})});