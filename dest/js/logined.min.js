"use strict";function sidebarRefresh(t){""!==t&&$.post("/api/get/getOrderNumber",t,function(t){var e=JSON.parse(t);$("#checkedCount").text(e.checkedCount),$("#uncheckCount").text(e.uncheckedCount);var n=e.checkedCount+e.uncheckedCount;$("#allCount").text(n)})}function turnUnreceived(t){nowpositon="Unreceived",$("#main").load("/tpl/UncheckedPage.html",function(){loadUnchecked(t)})}function changeToConfig(){nowpositon="Config",$("#main").load("/tpl/UsrConfig.html")}function turnReceived(t){nowpositon="Received",$("#main").load("/tpl/CheckedPage.html",function(){loadChecked(t)})}function turnBin(){nowpositon="Bin",$("#main").load("/tpl/UsrBin.html",loadBin)}function turnAll(){nowpositon="All",$("#main").load("/tpl/AllTable.html",loadAll)}function loginOut(){var t;""!==t?$.post("/api/login/loginOut",t,function(t){var e=JSON.parse(t);1==e.status?window.location="/login.html?respond=1":alert("没有成功登出")}):window.location="/login.html?respond=1"}function loadChecked(t){t&&(t=1),$.post("/api/get/getChecked",{page:t},function(t){t=JSON.parse(t),$("#OrderTable").html(""),$.each(t.orders,function(t,e){$("#OrderTable").append("<tr><td><label class='input-control checkbox small-check no-margin'><input type='checkbox' id='checkBox_"+t+"'><span class='check'></span></label></td><td>"+e.orderid+"</td><td>"+e.exporttime+"</td><td>"+e.orderinfo+"</td><td>"+e.postorid+"</td></tr>")}),iniPages(t.maxPage),loadConvertButton(t)})}function loadUnchecked(t){t&&(t=1),$.post("/api/get/getUnchecked",{page:t},function(t){t=JSON.parse(t),$("#OrderTable").html(""),$.each(t.orders,function(t,e){var n;n="1"==e.delay?new Date(new Date(e.importtime).valueOf()+864e5):new Date(e.importtime),$("#OrderTable").append("<tr><td><label class='input-control checkbox small-check no-margin'><input type='checkbox' class='uncheck' id='checkBox_"+t+"' data-id='"+e.orderid+"'><span class='check'></span></label></td><td>"+e.orderid+"</td><td>"+e.importtime+"</td><td>"+n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+n.toTimeString()+"</td><td>"+e.positionid+"</td><td>"+e.orderinfo+"</td><td>"+e.postorid+"</td></tr>")}),iniPages(t.maxPage),loadConvertButton(t)})}function getAllTable(){var t=1;$.post("/api/get/getAll",{page:t},function(t){t=JSON.parse(t),$("#OrderTable").html(""),$.each(t.orders,function(t,e){$("#OrderTable").append("<tr><td><label class='input-control checkbox small-check no-margin'><input type='checkbox' class='uncheck' id='checkBox_"+t+"' data-id='"+e.orderid+"'><span class='check'></span></label></td><td>"+e.orderid+"</td><td>"+e.importtime+"</td><td>"+e.exporttime+"</td><td>"+e.positionid+"</td><td>"+e.orderinfo+"</td><td>"+e.postorid+"</td></tr>")}),loadConvertButton(t)})}function loadAll(){var t=1;$.post("/api/get/getAll",{page:t},function(t){t=JSON.parse(t),$("#OrderTable").html(""),$.each(t.orders,function(t,e){$("#OrderTable").append("<tr><td><label class='input-control checkbox small-check no-margin'><input type='checkbox' class='uncheck' id='checkBox_"+t+"' data-id='"+e.orderid+"'><span class='check'></span></label></td><td>"+e.orderid+"</td><td>"+e.importtime+"</td><td>"+e.exporttime+"</td><td>"+e.positionid+"</td><td>"+e.orderinfo+"</td><td>"+e.postorid+"</td></tr>")}),loadConvertButton(t)})}function loadConvertButton(t){var e=t.page-0,n=t.maxPage-0;$("#page").html(""),$("#page").append(e+"/"+n),e>=2&&($("#previousPage").attr("onclick",""),$("#previousPage").attr("onclick","loadUnchecked("+(e-1)+")")),n>1&&($("#nextPage").attr("onclick",""),$("#nextPage").attr("onclick","loadUnchecked("+(e+1)+")"))}function respondDialog(t,e,n){var o=$(t).data("dialog");$(t).children().children()[0].innerHTML=n,o.open()}function showDialog(t){var e=$(t).data("dialog");e.open()}function closeDialog(t){var e=$(t).data("dialog");e.close()}function pushMessage(t){var e="通知|你已经选择了全部订单";$.Notify({caption:e.split("|")[0],content:e.split("|")[1],type:"success"})}function selectCheckBox(t){var e="通知|你已经选择了全部订单|你已经取消了全部订单";$.Notify({caption:e.split("|")[0],content:e.split("|")["true"==t?1:2],type:"true"==t?"info":"success"});var n=document.getElementsByClassName("uncheck");$.each(n,function(e,n){n.checked="true"==t})}function delayOrders(){var t="通知|你选择的订单已被延期处理";$.Notify({caption:t.split("|")[0],content:t.split("|")[1],type:"warning"});var e=[],n=document.getElementsByClassName("uncheck");return $.each(n,function(t,n){n.checked===!0&&e.push($(n).data("id"))}),0===e.length?!1:void $.ajax({type:"post",url:"/api/get/delay",data:{orderlist:e},dataType:"json",success:function(t){turnUnreceived()}})}function msg(t){$.Notify({caption:t.split("|")[0],content:t.split("|")[1],type:"success"})}function iniPages(t){var e=$("#pages");({cont:$("#pagecont"),pages:t,skip:!0,skin:"#01a0e1",groups:5,jump:function(t){var n=t.curr;switch(nowpositon){case"Unreceived":turnUnreceived(n);break;case"All":turnAll(n);break;case"Received":turnReceived(n)}e.html("当前：第"+t.curr+"页，总计："+t.pages+"页")}})}var nowpositon="default";$(function(){$(".sidebar").on("click","li",function(){$(this).hasClass("active")||($(".sidebar li").removeClass("active"),$(this).addClass("active"))})}),$(document).ready(function(){$("#tishi").load("/api/get/usrconfig",function(){$("#carousel").carousel()});var t;sidebarRefresh(t),$.ajax({type:"POST",url:"/api/get/getusrname",data:{},success:function(t){t=JSON.parse(t);var e=$("#username");e[0].innerHTML="",e.append('<span class="mif-cog"></span><span>'+t.name+"</span>")},dataType:"json"}),$(window).on("resize",function(){$(this).width()<=800?$(".sidebar").addClass("compact"):$(".sidebar").removeClass("compact")})});